<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <p id="test">Change me</p>
    <button onclick="apiTest()">Click me!</button>
<script>

function apiTest() {
    url = "http://localhost:5000/tasks";
    ajax_call('GET', url).then(function(res) {
        console.log(res);
        document.getElementById('test').innerHTML = res.data;
    });
}

function ajax_call(type, url) {
    return new Promise(function (resolve, reject) {
        var xhr = new XMLHttpRequest();
        xhr.open(type, url);
        xhr.onload = function() {
            if (this.status >= 200 && this.status < 300) {
                resolve(JSON.parse(xhr.response));
            } else {
                reject({
                    status: this.status,
                    statusText: xhr.statusText
                });
            }
        }
        xhr.onerror = function () {
            reject({
                status: this.status,
                statusText: xhr.statusText
            });
        }
        xhr.send();
    });
}

</script>
</body>
</html>
